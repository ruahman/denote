#+title:      mongodb
#+date:       [2023-05-28 dom 17:15]
#+filetags:   :tech:
#+identifier: 20230528T171549


== docker ==

run it
#+begin_src docker
  docker run -d -p 27017:27017 --name mongodb mongo:latest
#+end_src

open shell
#+begin_src docker
  docker exec -it mongodb mongosh
#+end_src

==mongosh==

show database
#+begin_src 
  show dbs
#+end_src

use database or create
#+begin_src 
  use <name-of-database>
#+end_src

show collections in database
#+begin_src 
  show collections
#+end_src

drop database
#+begin_src 
  db.dropDatabase()
#+end_src

show current database
#+begin_src 
  db
#+end_src

insert to collection
#+begin_src 
  db.<collection>.insertOne({..})
#+end_src

find
#+begin_src 
  db.<collection>.find()
#+end_src

insert many
#+begin_src 
  db.<ollections>.insertMany([{..},{..}])
#+end_src

limit find
#+begin_src 
  db.users.find().limit(2)
#+end_src

sort
#+begin_src 
  db.users.find().sort({ name: 1 })
#+end_src

find specific
#+begin_src 
  db.<collection>.find({ name: "diego"})
#+end_src

select
#+begin_src 
  db.<collection>.find({ name: "diego" }, { name: 1, age: 1 })
#+end_src

more complicated find
#+begin_src 
  db.<collection>.find({ name: { $eq: "Sally" }})
  db.<collection>.find({ name: { $neq: "Sally" }})
#+end_src

update
#+begin_src 
  db.<collection>.updateOne({age: 26}, { $set: { age: 27}))
#+end_src


